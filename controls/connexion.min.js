app.factory("Connexion",["$http","$q",function(n,o){var e={getToken:function(e,t){var r=o.defer();return n({method:"POST",url:"./models/token.php",data:$.param({email:e,pass:t}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(n){r.resolve(n)}).error(function(){r.reject("Impossible de se connecter !")}),r.promise}};return e}]),app.controller("ConnexionCtrl",["$scope","$timeout","Connexion",function(n,o,e){n.password="",n.email="",n.wrong=!1,n.connexion=function(){""!=n.email&&""!=n.password&&e.getToken(n.email,n.password).then(function(e){if("wrong"==e)n.wrong=!0,o(function(){n.wrong=!1},2e3);else if("unactive"==e)n.wrong=!1,$location.path("/activation");else{n.wrong=!1;var t=e.split("/");n.login(t[0],t[1],t[2])}},function(n){alert(n)})}}]);