app.factory("Inscription",["$http","$q",function(e,o){var s={subscribe:function(s,n,i,r){var a=o.defer();return e({method:"POST",url:"./models/subscribe.php",data:$.param({pseudo:s,email:n,pass:i,sexe:r}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){a.resolve(e)}).error(function(){a.reject("Probl√®me lors de l'inscription !")}),a.promise}};return s}]),app.controller("InscriptionCtrl",["$scope","$timeout","$location","Inscription",function(e,o,s,n){e.password="",e.passwordbis="",e.email="",e.emailbis="",e.pseudo="",e.sexe="masculin",e.wrong_pseudo=!1,e.wrong_email=!1,e.inscription=function(){""!=e.pseudo&&""!=e.email&&""!=e.password&&""!=e.sexe&&e.email==e.emailbis&&e.password==e.passwordbis&&n.subscribe(e.pseudo,e.email,e.password,e.sexe).then(function(n){"wrong_pseudo"==n?(e.wrong_pseudo=!0,e.wrong_email=!1,o(function(){e.wrong_pseudo=!1},2e3)):"wrong_email"==n?(e.wrong_email=!0,e.wrong_pseudo=!1,o(function(){e.wrong_email=!1},2e3)):("subscribed"==n||"unactive"==n)&&(e.wrong_pseudo=!1,e.wrong_email=!1,s.path("/activation"))},function(e){alert(e)})}}]);