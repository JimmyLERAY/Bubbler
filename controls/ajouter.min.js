app.factory("Ajouter",["$http","$q",function(e,t){var l={ajouter:function(l,n,o,a){o="attraction";var u=t.defer();return e({method:"POST",url:"./models/ajouter.php",data:$.param({bulle1:l,bulle2:n,intensite:o,token:a}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){u.resolve(e)}).error(function(){u.reject("Probl√®me lors de l'ajout du lien !")}),u.promise}};return l}]),app.controller("AjouterCtrl",["$scope","$timeout","$location","Ajouter",function(e,t,l,n){e.connected||l.path("/accueil"),e.intensite="attraction",e.bulle1="",e.bulle2="",e.add=!1,e.already=!1,e.notallowed=!1,e.help=!1,e.toggle_help=function(){e.help=!e.help},e.ajouter=function(){e.bulle1=document.getElementById("bulle1").value,e.bulle2=document.getElementById("bulle2").value,""!=e.bulle1&&""!=e.bulle2&""!=e.intensite&&0!=e.token&&n.ajouter(e.bulle1,e.bulle2,e.intensite,e.token).then(function(n){"add"==n?(e.intensite="attraction",e.bulle1="",e.bulle2="",e.add=!0,e.already=!1,e.notallowed=!1,t(function(){e.add=!1},2e3)):"already"==n?(e.add=!1,e.already=!0,e.notallowed=!1,t(function(){e.already=!1},2e3)):"not_allowed"==n?(e.add=!1,e.already=!1,e.notallowed=!0,t(function(){e.notallowed=!1},2e3)):"not_register"==n&&(e.add=!1,e.already=!1,e.notallowed=!1,l.path("/accueil"))},function(e){alert(e)})}}]);