app.factory("Activation",["$http","$q",function(t,e){var a={activateUser:function(a){var n=e.defer();return t({method:"POST",url:"./models/activate.php",data:$.param({activatetoken:a}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(t){n.resolve(t)}).error(function(){n.reject("Impossible de procéder à l'activation !")}),n.promise}};return a}]),app.controller("ActivationCtrl",["$scope","$timeout","$location","Activation",function(t,e,a,n){t.activatetoken="",t.wrong_key=!1,t.already_activated=!1,t.activate=function(){""!=t.activatetoken&&n.activateUser(t.activatetoken).then(function(n){"wrong_key"==n?(t.wrong_key=!0,t.already_activated=!1,e(function(){t.wrong_key=!1},2e3)):"already_activated"==n?(t.wrong_key=!1,t.already_activated=!0,e(function(){t.already_activated=!1},2e3)):"success"==n&&(t.wrong_key=!1,t.already_activated=!1,a.path("/accueil"))},function(t){alert(t)})}}]);